{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.media = exports.user = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nrequire('es6-promise/auto');\n\nrequire('isomorphic-fetch');\n\nvar _ramda = require('ramda');\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n/**\n * Constants\n */\n\n/**\n * Flow types\n */\n\n\nvar DEFAULT_ENDPOINT = '/users/';\nvar DEFAULT_ORIGIN = 'https://api.instagram.com';\nvar DEFAULT_SIZE = 0;\nvar DEFAULT_USER = 'self';\nvar DEFAULT_VERSION = 'v1';\n/**\n * Error handling\n */\n\nvar handleErrors = function handleErrors(res) {\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  return res;\n};\n/**\n * Core query\n */\n\n\nvar query = function query(_ref) {\n  var _ref$accessToken = _ref.accessToken,\n      accessToken = _ref$accessToken === undefined ? '' : _ref$accessToken,\n      _ref$endpoint = _ref.endpoint,\n      endpoint = _ref$endpoint === undefined ? DEFAULT_ENDPOINT + DEFAULT_USER : _ref$endpoint,\n      _ref$origin = _ref.origin,\n      origin = _ref$origin === undefined ? DEFAULT_ORIGIN : _ref$origin,\n      _ref$size = _ref.size,\n      size = _ref$size === undefined ? DEFAULT_SIZE : _ref$size,\n      _ref$version = _ref.version,\n      version = _ref$version === undefined ? DEFAULT_VERSION : _ref$version;\n  var count = size ? '&count=' + size : '';\n  return fetch(origin + '/' + version + endpoint + '?access_token=' + accessToken + count).then(handleErrors).then(function (res) {\n    return res.json();\n  });\n};\n/**\n * Enhancers\n */\n\n\nvar withUserId = function withUserId() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_USER;\n  return function (fn) {\n    return function (_ref2) {\n      var options = _objectWithoutProperties(_ref2, []);\n\n      return fn(_extends({}, options, {\n        endpoint: DEFAULT_ENDPOINT + id\n      }));\n    };\n  };\n};\n\nvar withAccessToken = function withAccessToken() {\n  var accessToken = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return function (fn) {\n    return function (_ref3) {\n      var options = _objectWithoutProperties(_ref3, []);\n\n      return fn(_extends({}, options, {\n        accessToken: accessToken\n      }));\n    };\n  };\n};\n\nvar withMedia = function withMedia() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'recent';\n  return function (fn) {\n    return function () {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _ref4$endpoint = _ref4.endpoint,\n          endpoint = _ref4$endpoint === undefined ? DEFAULT_ENDPOINT + DEFAULT_USER : _ref4$endpoint,\n          options = _objectWithoutProperties(_ref4, ['endpoint']);\n\n      return fn(_extends({}, options, {\n        endpoint: endpoint + '/media/' + type\n      }));\n    };\n  };\n};\n\nvar withCount = function withCount() {\n  var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return function (fn) {\n    return function (_ref5) {\n      var options = _objectWithoutProperties(_ref5, []);\n\n      return fn(_extends({}, options, {\n        count: count\n      }));\n    };\n  };\n};\n/**\n * Public API\n */\n\n\nvar user = exports.user = function user(_ref6) {\n  var accessToken = _ref6.accessToken,\n      id = _ref6.id;\n  return (0, _ramda.compose)(withUserId(id), withAccessToken(accessToken))(query)();\n};\n\nvar media = exports.media = function media(_ref7) {\n  var accessToken = _ref7.accessToken,\n      type = _ref7.type,\n      id = _ref7.id,\n      _ref7$size = _ref7.size,\n      size = _ref7$size === undefined ? 10 : _ref7$size;\n  return (0, _ramda.compose)(withUserId(id), withAccessToken(accessToken), withCount(size), withMedia(type))(query)();\n};\n\nvar createInstagramInstance = function createInstagramInstance(options) {\n  if (!options || (typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object' || typeof options.accessToken !== 'string') {\n    throw new Error('Couldn\\'t find instagram accessToken.\\n      Did you pass the accessToken correctly?\\n      Should be like `instagram({ accessToken: \\'MY_TOKEN\\' })`');\n  }\n\n  var accessToken = options.accessToken;\n  return {\n    media: (0, _ramda.compose)(withAccessToken(accessToken))(media),\n    user: (0, _ramda.compose)(withAccessToken(accessToken))(user)\n  };\n};\n\nexports.default = createInstagramInstance;","map":null,"metadata":{},"sourceType":"script"}