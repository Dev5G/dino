!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t["react-sticky-box"]=e(t.React)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e};var o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},o=0;o<10;o++)e["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}})()&&Object.assign;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function s(){}(function(t){t.exports=function(){function t(t,e,o,n,r,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var o={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return o.checkPropTypes=s,o.PropTypes=o,o}()})(a={exports:{}},a.exports);var a,c=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var o=-1;return t.some(function(t,n){return t[0]===e&&(o=n,!0)}),o}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var o=t(this.__entries__,e),n=this.__entries__[o];return n&&n[1]},e.prototype.set=function(e,o){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=o:this.__entries__.push([e,o])},e.prototype.delete=function(e){var o=this.__entries__,n=t(o,e);~n&&o.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var o=0,n=this.__entries__;o<n.length;o++){var r=n[o];t.call(e,r[1],r[0])}},e}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),h="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},d=2;var u=20,p=["top","right","bottom","left","width","height","size","weight"],v="undefined"!=typeof MutationObserver,y=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var o=!1,n=!1,r=0;function i(){o&&(o=!1,t()),n&&a()}function s(){h(i)}function a(){var t=Date.now();if(o){if(t-r<d)return;n=!0}else o=!0,n=!1,setTimeout(s,e);r=t}return a}(this.refresh.bind(this),u)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,o=e.indexOf(t);~o&&e.splice(o,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,o=void 0===e?"":e;p.some(function(t){return!!~o.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),m=function(t,e){for(var o=0,n=Object.keys(e);o<n.length;o++){var r=n[o];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},g=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||l},b=E(0,0,0,0);function _(t){return parseFloat(t)||0}function w(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return e.reduce(function(e,o){return e+_(t["border-"+o+"-width"])},0)}function O(t){var e=t.clientWidth,o=t.clientHeight;if(!e&&!o)return b;var n=g(t).getComputedStyle(t),r=function(t){for(var e={},o=0,n=["top","right","bottom","left"];o<n.length;o++){var r=n[o],i=t["padding-"+r];e[r]=_(i)}return e}(n),i=r.left+r.right,s=r.top+r.bottom,a=_(n.width),c=_(n.height);if("border-box"===n.boxSizing&&(Math.round(a+i)!==e&&(a-=w(n,"left","right")+i),Math.round(c+s)!==o&&(c-=w(n,"top","bottom")+s)),!function(t){return t===g(t).document.documentElement}(t)){var f=Math.round(a+i)-e,l=Math.round(c+s)-o;1!==Math.abs(f)&&(a-=f),1!==Math.abs(l)&&(c-=l)}return E(r.left,r.top,a,c)}var P="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof g(t).SVGGraphicsElement}:function(t){return t instanceof g(t).SVGElement&&"function"==typeof t.getBBox};function T(t){return f?P(t)?function(t){var e=t.getBBox();return E(0,0,e.width,e.height)}(t):O(t):b}function E(t,e,o,n){return{x:t,y:e,width:o,height:n}}var S=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=T(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),k=function(){return function(t,e){var o,n,r,i,s,a,c,f=(n=(o=e).x,r=o.y,i=o.width,s=o.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),m(c,{x:n,y:r,width:i,height:s,top:r,right:n+i,bottom:s+r,left:n}),c);m(this,{target:t,contentRect:f})}}(),M=function(){function t(t,e,o){if(this.activeObservations_=[],this.observations_=new c,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=o}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new k(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),H="undefined"!=typeof WeakMap?new WeakMap:new c,x=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=y.getInstance(),n=new M(e,o,this);H.set(this,n)}}();["observe","unobserve","disconnect"].forEach(function(t){x.prototype[t]=function(){var e;return(e=H.get(this))[t].apply(e,arguments)}});var B=void 0!==l.ResizeObserver?l.ResizeObserver:x,C=function(t){for(var e=t;e=e.parentElement;){var o=getComputedStyle(e,null).getPropertyValue("overflow-y");if(e===document.body)return window;if("auto"===o||"scroll"===o)return e}return window},j=function(t,e){var o=t,n=0;e.firstChild&&e.firstChild.offsetParent!==e&&(n+=t.offsetTop-e.offsetTop,e=t.offsetParent,n+=-t.offsetTop);do{n+=o.offsetTop,o=o.offsetParent}while(o&&o!==e);return n},R=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?R="sticky":CSS.supports("position","-webkit-sticky")&&(R="-webkit-sticky"));var A=!1;try{var L=Object.defineProperty({},"passive",{get:function(){A={passive:!0}}});window.addEventListener("testPassive",null,L),window.removeEventListener("testPassive",null,L)}catch(t){}var I=function(o){function n(t){var e=o.call(this,t)||this;return e.registerContainerRef=function(t){R&&(e.node=t,t?(e.scrollPane=C(e.node),e.latestScrollY=e.scrollPane===window?window.scrollY:e.scrollPane.scrollTop,e.scrollPane.addEventListener("scroll",e.handleScroll,A),e.scrollPane.addEventListener("mousewheel",e.handleScroll,A),e.scrollPane===window?(window.addEventListener("resize",e.updateViewport),e.updateViewport()):(e.rosp=new B(e.updateScrollPane),e.rosp.observe(e.scrollPane),e.updateScrollPane()),e.ropn=new B(e.updateParentNode),e.ropn.observe(e.node.parentNode),e.updateParentNode(),e.ron=new B(e.updateNode),e.ron.observe(e.node),e.updateNode({initial:!0}),e.initial()):(e.scrollPane.removeEventListener("mousewheel",e.handleScroll,A),e.scrollPane.removeEventListener("scroll",e.handleScroll,A),e.scrollPane===window?window.removeEventListener("resize",e.getMeasurements):e.rosp.disconnect(),e.ropn.disconnect(),e.ron.disconnect(),e.scrollPane=null))},e.updateViewport=function(){e.viewPortHeight=window.innerHeight,e.scrollPaneOffset=0},e.updateScrollPane=function(){e.viewPortHeight=e.scrollPane.offsetHeight,e.scrollPane.firstChild.offsetParent===e.scrollPane?e.scrollPaneOffset=e.scrollPane.getBoundingClientRect().top:e.scrollPaneOffset=0},e.updateParentNode=function(){var t=e.node.parentNode,o=getComputedStyle(t,null),n=parseInt(o.getPropertyValue("padding-top"),10),r=parseInt(o.getPropertyValue("padding-bottom"),10);e.naturalTop=j(t,e.scrollPane)+n+e.scrollPaneOffset;var i=e.parentHeight;e.parentHeight=t.getBoundingClientRect().height-(n+r),"relative"===e.mode&&i>e.parentHeight&&e.changeToStickyBottomIfBoxTooLow(e.latestScrollY),i!==e.parentHeight&&"relative"===e.mode&&(e.latestScrollY=Number.POSITIVE_INFINITY,e.handleScroll())},e.updateNode=function(t){var o=(void 0===t?{}:t).initial,n=e.nodeHeight;if(e.nodeHeight=e.node.getBoundingClientRect().height,!o&&n!==e.nodeHeight){e.mode=void 0;var r=e.getOffsets(),i=r.offsetTop,s=r.offsetBottom;if(e.nodeHeight+i+s<=e.viewPortHeight)e.initial();else{e.mode="relative",e.node.style.position="relative";var a=e.parentHeight-e.nodeHeight,c=e.scrollPaneOffset+e.latestScrollY-e.naturalTop+i;e.offset=Math.max(0,Math.min(a,c)),e.node.style.top=e.offset+"px"}}},e.handleScroll=function(){var t=e.getOffsets(),o=t.offsetTop,n=t.offsetBottom,r=e.scrollPane===window?window.scrollY:e.scrollPane.scrollTop;if(r!==e.latestScrollY){if(e.nodeHeight+o+n<=e.viewPortHeight)return e.initial(),void(e.latestScrollY=r);r-e.latestScrollY>0?"stickyTop"===e.mode?(e.offset=Math.max(0,e.scrollPaneOffset+e.latestScrollY-e.naturalTop+o),r+e.scrollPaneOffset+o>e.naturalTop&&(r+e.scrollPaneOffset+e.viewPortHeight<=e.naturalTop+e.nodeHeight+e.offset+n?(e.props.onChangeMode(e.mode,"relative"),e.mode="relative",e.node.style.position="relative",e.node.style.top=e.offset+"px"):e.switchToStickyBottom())):"relative"===e.mode&&e.changeToStickyBottomIfBoxTooLow(r):"stickyBottom"===e.mode?(e.offset=Math.max(0,e.scrollPaneOffset+e.latestScrollY+e.viewPortHeight-(e.naturalTop+e.nodeHeight+n)),e.scrollPaneOffset+r+e.viewPortHeight<e.naturalTop+e.parentHeight+n&&(e.scrollPaneOffset+r+o>=e.naturalTop+e.offset?(e.props.onChangeMode(e.mode,"relative"),e.mode="relative",e.node.style.position="relative",e.node.style.top=e.offset+"px"):e.switchToStickyTop())):"relative"===e.mode&&e.scrollPaneOffset+r+o<e.naturalTop+e.offset&&e.switchToStickyTop(),e.latestScrollY=r}},e.switchToStickyBottom=function(){var t=e.getOffsets(),o=(t._,t.offsetBottom);e.props.onChangeMode(e.mode,"stickyBottom"),e.mode="stickyBottom",e.node.style.position=R,e.node.style.top=e.viewPortHeight-e.nodeHeight-o+"px"},e.switchToStickyTop=function(){var t=e.getOffsets(),o=t.offsetTop;t._;e.props.onChangeMode(e.mode,"stickyTop"),e.mode="stickyTop",e.node.style.position=R,e.node.style.top=o+"px"},t.offset,e}e(n,o);var r=n.prototype;return r.getOffsets=function(){var t=this.props,e=t.offset;return{offsetTop:t.offsetTop||e,offsetBottom:t.offsetBottom}},r.initial=function(){var t=this.props.bottom,e=this.getOffsets(),o=e.offsetTop,n=e.offsetBottom;t?"stickyBottom"!==this.mode&&(this.props.onChangeMode(this.mode,"stickyBottom"),this.mode="stickyBottom",this.node.style.position=R,this.node.style.top=this.viewPortHeight-this.nodeHeight-n+"px"):"stickyTop"!==this.mode&&(this.props.onChangeMode(this.mode,"stickyTop"),this.mode="stickyTop",this.node.style.position=R,this.node.style.top=o+"px")},r.changeToStickyBottomIfBoxTooLow=function(t){var e=this.getOffsets().offsetBottom;t+this.scrollPaneOffset+this.viewPortHeight>=this.naturalTop+this.nodeHeight+this.offset+e&&this.switchToStickyBottom()},r.render=function(){var e=this.props,o=e.children,n=e.className,r=e.style;return t.createElement("div",{className:n,style:r,ref:this.registerContainerRef},o)},n}(t.Component);return I.defaultProps={onChangeMode:function(){},offset:0,offsetTop:0,offsetBottom:0},I});
//# sourceMappingURL=react-sticky-box.umd.min.js.map
